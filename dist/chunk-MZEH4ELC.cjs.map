{"version":3,"sources":["/Users/quique/Documents/serverbench/js/dist/chunk-MZEH4ELC.cjs","../src/store/Store.ts"],"names":["Store","client","username","eid","StoreDisplay","count","prices","discounts","member","country","finalPrices","price","finalDiscounts","discount","finalMember","Element","email","token","req"],"mappings":"AAAA,qOAAwC,wDAAoC,ICOvDA,CAAAA,CAArB,KAA2B,CAIvB,WAAA,CAAYC,CAAAA,CAAqB,CAC7B,IAAA,CAAK,MAAA,CAASA,CAClB,CAEA,MAAM,GAAA,CAAIC,CAAAA,CAAmBC,CAAAA,CAAc,CACvC,OAAOC,mBAAAA,CAAa,UAAA,CAAW,IAAA,CAAK,MAAA,CAAQ,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,WAAA,CAAa,aAAA,CAAe,CAC3F,QAAA,CAAAF,CAAAA,CACA,GAAA,CAAAC,CACJ,CAAC,CAAC,CACN,CAEA,MAAM,iBAAA,CAAA,CAAoB,CACtB,GAAM,CAAE,KAAA,CAAAE,CAAM,CAAA,CAAI,MAAM,IAAA,CAAK,MAAA,CAAO,GAAA,CAAI,WAAA,CAAa,qBAAqB,CAAA,CAC1E,OAAOA,CACX,CAEA,QAAA,CAASC,CAAAA,CAAgCC,CAAAA,CAAmCC,CAAAA,CAAyBC,CAAAA,CAAwB,CACzH,IAAMC,CAAAA,CAAcJ,CAAAA,CAAO,GAAA,CAAIK,CAAAA,EAAS,OAAOA,CAAAA,EAAU,QAAA,CAAWA,CAAAA,CAAQA,CAAAA,CAAM,EAAE,CAAA,CAC9EC,CAAAA,CAAiBL,CAAAA,CAAU,GAAA,CAAIM,CAAAA,EAAY,OAAOA,CAAAA,EAAa,QAAA,CAAWA,CAAAA,CAAWA,CAAAA,CAAS,EAAE,CAAA,CAChGC,CAAAA,CAAc,OAAON,CAAAA,EAAW,QAAA,CAAWA,CAAAA,CAASA,CAAAA,CAAO,EAAA,CACjE,OAAO,IAAIO,wBAAAA,CACP,IAAA,CAAK,MAAA,CACL,qBAAA,CACA,CACI,MAAA,CAAQL,CAAAA,CAAY,IAAA,CAAK,GAAG,CAAA,CAC5B,SAAA,CAAWE,CAAAA,CAAe,IAAA,CAAK,GAAG,CAAA,CAClC,MAAA,CAAQE,CAAAA,CACR,OAAA,kBAASL,CAAAA,SAAW,KAAA,GACxB,CACJ,CACJ,CAEA,MAAM,WAAA,CAAYH,CAAAA,CAAgCC,CAAAA,CAAmCC,CAAAA,CAAyBQ,CAAAA,CAAeP,CAAAA,CAAyB,IAAA,CAAM,CACxJ,IAAMC,CAAAA,CAAcJ,CAAAA,CAAO,GAAA,CAAIK,CAAAA,EAAS,OAAOA,CAAAA,EAAU,QAAA,CAAWA,CAAAA,CAAQA,CAAAA,CAAM,EAAE,CAAA,CAC9EC,CAAAA,CAAiBL,CAAAA,CAAU,GAAA,CAAIM,CAAAA,EAAY,OAAOA,CAAAA,EAAa,QAAA,CAAWA,CAAAA,CAAWA,CAAAA,CAAS,EAAE,CAAA,CAChGC,CAAAA,CAAc,OAAON,CAAAA,EAAW,QAAA,CAAWA,CAAAA,CAASA,CAAAA,CAAO,EAAA,CAQjE,OAPiB,MAAM,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,WAAA,CAAa,iBAAA,CAAmB,CACpE,MAAA,CAAQE,CAAAA,CACR,SAAA,CAAWE,CAAAA,CACX,MAAA,CAAQE,CAAAA,CACR,KAAA,CAAAE,CAAAA,CACA,OAAA,kBAASP,CAAAA,SAAW,KAAA,GACxB,CAAC,CAEL,CAEA,MAAM,aAAA,CAAcQ,CAAAA,CAAe,CAC/B,IAAMC,CAAAA,CAAM,MAAM,KAAA,CAAM,CAAA,EAAA","file":"/Users/quique/Documents/serverbench/js/dist/chunk-MZEH4ELC.cjs","sourcesContent":[null,"import Element from \"../element/Element.js\";\nimport Member from \"../Member.js\";\nimport type Serverbench from \"../Serverbench.js\";\nimport IDiscount from \"./IDiscount.js\";\nimport ISkuPrice from \"./ISkuPrice.js\";\nimport StoreDisplay from \"./StoreDisplay.js\";\n\nexport default class Store {\n\n    private client: Serverbench\n\n    constructor(client: Serverbench) {\n        this.client = client\n    }\n\n    async get(username?: string, eid?: string) {\n        return StoreDisplay.fromObject(this.client, await this.client.post('community', '/store/view', {\n            username,\n            eid\n        }))\n    }\n\n    async subscriptionCount() {\n        const { count } = await this.client.get('community', '/subscription/count')\n        return count\n    }\n\n    checkout(prices: ISkuPrice[] | string[], discounts: IDiscount[] | string[], member: Member | string, country: string | null) {\n        const finalPrices = prices.map(price => typeof price === 'string' ? price : price.id)\n        const finalDiscounts = discounts.map(discount => typeof discount === 'string' ? discount : discount.id)\n        const finalMember = typeof member === 'string' ? member : member.id\n        return new Element(\n            this.client,\n            '/community/checkout',\n            {\n                prices: finalPrices.join(','),\n                discounts: finalDiscounts.join(','),\n                member: finalMember,\n                country: country ?? undefined\n            }\n        )\n    }\n\n    async getCheckout(prices: ISkuPrice[] | string[], discounts: IDiscount[] | string[], member: Member | string, email: string, country: string | null = null) {\n        const finalPrices = prices.map(price => typeof price === 'string' ? price : price.id)\n        const finalDiscounts = discounts.map(discount => typeof discount === 'string' ? discount : discount.id)\n        const finalMember = typeof member === 'string' ? member : member.id\n        const checkout = await this.client.post('community', '/store/checkout', {\n            prices: finalPrices,\n            discounts: finalDiscounts,\n            member: finalMember,\n            email,\n            country: country ?? undefined\n        })\n        return checkout\n    }\n\n    async claimCheckout(token: string) {\n        const req = await fetch(`${this.client.domain}/checkout/claim`, {\n            headers: {\n                authorization: `Bearer ${token}`\n            },\n            method: 'POST'\n        })\n        if (req.status != 200 && req.status != 201) {\n            throw new Error(`Error claiming checkout: ${req.statusText}`)\n        }\n    }\n\n    billing() {\n        return new Element(this.client, '/billing')\n    }\n\n}"]}