{"version":3,"sources":["../src/voting/ListingDisplay.ts"],"sourcesContent":["import Member from \"../Member.js\"\r\nimport Serverbench from \"../Serverbench.js\"\r\nimport IListingSettings from \"./IListingSettings.js\"\r\nimport ListingSiteDisplay from \"./ListingSiteDisplay.js\"\r\n\r\nexport default class ListingDisplay {\r\n\r\n    private readonly client: Serverbench\r\n\r\n    public readonly id: string\r\n    public readonly hash: string\r\n    public readonly created: Date\r\n    public readonly member: Member\r\n    public readonly primaryCompleted: Date | null\r\n    public readonly primaryNext: Date | null\r\n    public readonly secondaryCompleted: Date | null\r\n    public readonly secondaryNext: Date | null\r\n    public readonly settings: IListingSettings\r\n    public readonly sites: ListingSiteDisplay[]\r\n\r\n    constructor(client: Serverbench, id: string, hash: string, created: Date, member: Member, primaryCompleted: Date | null, primaryNext: Date | null, secondaryCompleted: Date | null, secondaryNext: Date | null, settings: IListingSettings, sites: ListingSiteDisplay[]) {\r\n        this.client = client\r\n        this.id = id\r\n        this.hash = hash\r\n        this.created = created\r\n        this.member = member\r\n        this.primaryCompleted = primaryCompleted\r\n        this.primaryNext = primaryNext\r\n        this.secondaryCompleted = secondaryCompleted\r\n        this.secondaryNext = secondaryNext\r\n        this.settings = settings\r\n        this.sites = sites\r\n    }\r\n\r\n    public static fromObject(serverbench: Serverbench, obj: any) {\r\n        return new ListingDisplay(\r\n            serverbench,\r\n            obj.id,\r\n            obj.hash,\r\n            new Date(obj.created),\r\n            obj.member as Member,\r\n            obj.primaryCompleted ? new Date(obj.primaryCompleted) : null,\r\n            obj.primaryNext ? new Date(obj.primaryNext) : null,\r\n            obj.secondaryCompleted ? new Date(obj.secondaryCompleted) : null,\r\n            obj.secondaryNext ? new Date(obj.secondaryNext) : null,\r\n            obj.settings as IListingSettings,\r\n            obj.sites.map((site: any) => ListingSiteDisplay.fromObject(site))\r\n        )\r\n    }\r\n\r\n    public subscribe(callback = (display: ListingDisplay) => { }) {\r\n        const { ws, dispose } = this.client.socket(`listing.display.${this.member.id}`, (data)=>{\r\n            callback(ListingDisplay.fromObject(this.client, data))\r\n        })\r\n        return dispose\r\n    }\r\n}"],"mappings":"wCAKA,IAAqBA,EAArB,MAAqBC,CAAe,CAehC,YAAYC,EAAqBC,EAAYC,EAAcC,EAAeC,EAAgBC,EAA+BC,EAA0BC,EAAiCC,EAA4BC,EAA4BC,EAA6B,CACrQ,KAAK,OAASV,EACd,KAAK,GAAKC,EACV,KAAK,KAAOC,EACZ,KAAK,QAAUC,EACf,KAAK,OAASC,EACd,KAAK,iBAAmBC,EACxB,KAAK,YAAcC,EACnB,KAAK,mBAAqBC,EAC1B,KAAK,cAAgBC,EACrB,KAAK,SAAWC,EAChB,KAAK,MAAQC,CACjB,CAEA,OAAc,WAAWC,EAA0BC,EAAU,CACzD,OAAO,IAAIb,EACPY,EACAC,EAAI,GACJA,EAAI,KACJ,IAAI,KAAKA,EAAI,OAAO,EACpBA,EAAI,OACJA,EAAI,iBAAmB,IAAI,KAAKA,EAAI,gBAAgB,EAAI,KACxDA,EAAI,YAAc,IAAI,KAAKA,EAAI,WAAW,EAAI,KAC9CA,EAAI,mBAAqB,IAAI,KAAKA,EAAI,kBAAkB,EAAI,KAC5DA,EAAI,cAAgB,IAAI,KAAKA,EAAI,aAAa,EAAI,KAClDA,EAAI,SACJA,EAAI,MAAM,IAAKC,GAAcC,EAAmB,WAAWD,CAAI,CAAC,CACpE,CACJ,CAEO,UAAUE,EAAYC,GAA4B,CAAE,EAAG,CAC1D,GAAM,CAAE,GAAAC,EAAI,QAAAC,CAAQ,EAAI,KAAK,OAAO,OAAO,mBAAmB,KAAK,OAAO,EAAE,GAAKC,GAAO,CACpFJ,EAAShB,EAAe,WAAW,KAAK,OAAQoB,CAAI,CAAC,CACzD,CAAC,EACD,OAAOD,CACX,CACJ","names":["ListingDisplay","_ListingDisplay","client","id","hash","created","member","primaryCompleted","primaryNext","secondaryCompleted","secondaryNext","settings","sites","serverbench","obj","site","ListingSiteDisplay","callback","display","ws","dispose","data"]}